<script type='text/x-handlebars-template' id="handlebar-template">
&lt;html ng-app=&quot;myApp&quot;&gt;
&lt;head&gt;
    &lt;link rel=&quot;icon&quot; href=&quot;data:;base64,iVBORw0KGgo=&quot;&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css&quot; integrity=&quot;sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u&quot; crossorigin=&quot;anonymous&quot;&gt;
    &lt;script src=&quot;//use.fontawesome.com/3d61d6959e.js&quot;&gt;&lt;/script&gt;
    
    &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js&quot;&gt;&lt;/script&gt;
  
    &lt;!-- Adding JQUERY To use jQuery, simply ensure it is loaded before the angular.js file. --&gt;
    &lt;script src=&quot;//ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;//code.jquery.com/ui/1.12.0/jquery-ui.js&quot;&gt;&lt;/script&gt;
 	&lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js&quot; &gt;&lt;/script&gt;
    &lt;script src=&quot;//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js&quot; &gt;&lt;/script&gt;
    
    &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/moment.js/2.20.1/moment.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/moment-timezone/0.5.21/moment-timezone-with-data.min.js&quot;&gt;&lt;/script&gt;
    &lt;!-- Adding Angular --&gt;
    &lt;script src=&quot;//ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;//ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular-route.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/angular.js/1.4.0/angular-mocks.js&quot;&gt;&lt;/script&gt;
    
    &lt;script src=&quot;//ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-animate.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;//ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular-sanitize.js&quot;&gt;&lt;/script&gt;
    
    &lt;!-- Charts used in historical angular.morris --&gt;
    &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.4/raphael-min.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css&quot;&gt;
    
     &lt;link rel=&quot;stylesheet&quot; href=&quot;/UIComponents/dashboard/frontend/components/chart/chart.css&quot;&gt;
  
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/chart/morris.js&quot;&gt;&lt;/script&gt;
    &lt;!--script src=&quot;//cdnjs.cloudflare.com/ajax/libs/angular-morris/1.3.0/angular-morris.min.js&quot;&gt;&lt;/script--&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/chart/angular.morris.js&quot;&gt;&lt;/script&gt;
  
    &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.4/raphael-min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/justgage/1.2.2/justgage.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/gauge/angular.gauge.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/gauge/gauge.js&quot;&gt;&lt;/script&gt;
    
  
  	&lt;script src=&quot;//d3js.org/d3.v4.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/speedometer/angular.metergauge.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/speedometer/speedometer.js&quot;&gt;&lt;/script&gt;
  
  
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/UIComponents/dashboard/frontend/components/odometer/odometer.car.css&quot;&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/odometer/odometer.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/odometer/angular.odometer.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/odometer/odometer.js&quot;&gt;&lt;/script&gt;
  
    &lt;script src=&quot;//ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular-cookies.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;//cdn.rawgit.com/gdi2290/angular-websocket/v1.0.9/angular-websocket.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/wsProvider.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/httpProvider.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dataService.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/chart/chart.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/2.5.0/ui-bootstrap.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/2.5.0/ui-bootstrap-tpls.min.js&quot;&gt;&lt;/script&gt;

    &lt;link rel=&quot;stylesheet&quot; href=&quot;/UIComponents/dashboardBuilder/lib/gridster/angular_gridster.min.css&quot;&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/UIComponents/dashboardBuilder/css/{{dashboardSettings.theme}}.css&quot;&gt;
    &lt;script src=&quot;/UIComponents/dashboardBuilder/lib/gridster/angular_gridster.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/alert/ngScriptrAlert.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/alert/alert.js&quot;&gt;&lt;/script&gt;
    
   &lt;script src=&quot;//maps.google.com/maps/api/js?key=AIzaSyBcPYghFh_BXz4dDz-TXTHbU2iV3Wbf57I&amp;libraries=drawing,visualization&quot;&gt;&lt;/script&gt;
   &lt;script src=&quot;/UIComponents/dashboard/frontend/components/map/markerClusterer.js&quot;&gt;&lt;/script&gt;
   &lt;script src=&quot;//rawgit.com/allenhwkim/angularjs-google-maps/master/build/scripts/ng-map.js&quot;&gt;&lt;/script&gt;
  
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/map/map.js&quot;&gt;&lt;/script&gt;
    
    
    
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/UIComponents/dashboard/frontend/components/thermometer/style.css&quot;&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/thermometer/thermometer_directive.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/thermometer/thermometer.js&quot;&gt;&lt;/script&gt;
    
    &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/ag-grid/10.0.0/ag-grid.js?ignore=notused36&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/grid/grid.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/UIComponents/dashboard/frontend/components/grid/grid.css&quot;&gt;
    
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/UIComponents/dashboard/frontend/components/map/map.css&quot;&gt;
    &lt;link href=&quot;/UIComponents/dashboard/frontend/components/toggleSwitch/angular_toggle_switch.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/toggleSwitch/angular_toggle_switch.js&quot;&gt;&lt;/script&gt;
      
    
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/UIComponents/dashboard/frontend/components/dygraphs/dygraphs-2.1.0.css&quot;&gt;
    
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/dygraphs/dygraphs-2.1.0.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/dygraphs/angular-dygraphs.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/dygraphs/dygraphs.js&quot;&gt;&lt;/script&gt;
    
    &lt;link href=&quot;/UIComponents/dashboard/frontend/components/toggleSwitch/angular_toggle_switch.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/toggleSwitch/angular_toggle_switch.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/toggleSwitch/toggle_switch.js&quot;&gt;&lt;/script&gt;
    
    &lt;link href=&quot;//cdnjs.cloudflare.com/ajax/libs/angularjs-slider/6.2.2/rzslider.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;
    &lt;script src=&quot;//cdnjs.cloudflare.com/ajax/libs/angularjs-slider/6.2.2/rzslider.min.js&quot;&gt;&lt;/script&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/UIComponents/dashboard/frontend/components/slider/slider.css&quot;&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/slider/slider.js&quot;&gt;&lt;/script&gt;
    
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/UIComponents/dashboard/frontend/components/button/button.css&quot;&gt;
    &lt;script src=&quot;//rawgit.com/johannesjo/angular-promise-buttons/master/dist/angular-promise-buttons.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/button/button.js&quot;&gt;&lt;/script&gt;
    
    &lt;link href=&quot;/UIComponents/dashboard/frontend/components/IFrame/IFrame.css&quot; media=&quot;all&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/IFrame/IFrame.js&quot;&gt;&lt;/script&gt;
    
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/UIComponents/dashboard/frontend/components/displayCount/count.css&quot;&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/displayCount/displayCount.js&quot;&gt;&lt;/script&gt;
 
    &lt;link rel=&quot;stylesheet&quot;  href=&quot;/UIComponents/dashboard/frontend/components/accelerometer/accelerometer.css&quot;/&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/accelerometer/accelerometer.js&quot;&gt;&lt;/script&gt;
    
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/UIComponents/dashboard/frontend/components/thermometer/style.css&quot;&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/thermometer/thermometer_directive.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/thermometer/thermometer.js&quot;&gt;&lt;/script&gt;
    
    
    &lt;link rel=&quot;stylesheet&quot; href=&quot;/UIComponents/dashboard/frontend/components/plotly/windrose.css&quot;&gt;
    &lt;script src=&quot;//cdn.plot.ly/plotly-latest.min.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/plotly/angular-plotly.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/plotly/windrose.js&quot;&gt;&lt;/script&gt;
    &lt;script src=&quot;/UIComponents/dashboard/frontend/components/plotly/3dsurface.js&quot;&gt;&lt;/script&gt;
    
    
     &lt;link rel=&quot;stylesheet&quot; href=&quot;/UIComponents/dashboard/frontend/components/metricBox/metricBox.css&quot;&gt;
     &lt;script src=&quot;/UIComponents/dashboard/frontend/components/metricBox/metricBox.js&quot;&gt;&lt;/script&gt;
 
&lt;/head&gt; 
  
  
&lt;style&gt;
  {{compiledCss}}
&lt;/style&gt;
&lt;style&gt;
  {{inlineStyle}}
&lt;/style&gt;

&lt;script&gt;

(function() {
	
  if(&quot;{{{dashboardSettings.requiresLogin}}}&quot; == &quot;Yes&quot;){
  
   var scriptName = window.location.pathname.substring(1,window.location.pathname.length )
   var loginTemplateTarget =&quot;/UIComponents/dashboardBuilder/loginTemplate.html?redirectTarget=&quot;+scriptName+&quot;&amp;anon_token={{{anon_token}}}&quot;

    var authorization  = $.scriptr.authorization(
        {
          onTokenValid: function(){ }, 
          loginPage: loginTemplateTarget
        }
      );
    }
  
  
   $.urlParam = function(name){
	     var results = new RegExp('[\?&amp;]' + name + '=([^&amp;#]*)').exec(window.location.href);
	     if (results==null){
	         return null;
	     }else{
	         return results[1] || 0;
	     }
	}

	$.getUrlVars = function() {
		var vars = [], hash;
		var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&amp;');
		for(var i = 0; i &lt; hashes.length; i++)
		{
			hash = hashes[i].split('=');
			vars.push(hash[0]);
			vars[hash[0]] = hash[1];
		}
		return vars;
	}
    
    var underscore = angular.module('underscore', []);
		underscore.factory('_', ['$window', function($window) {		
  		return $window._; // assumes underscore has already been loaded on the page		
	}]);
    

    var wssConfig = [&quot;wsClientProvider&quot;,function (wsClientProvider) {
   	 	wsClientProvider.setBaseUrl(&quot;wss://&quot; + window.location.host + &quot;/&quot;);   	 
        wsClientProvider.setToken($.urlParam(&quot;auth_token&quot;));
        wsClientProvider.setPublishChannel(&quot;{{{dashboardSettings.publishChannel}}}&quot;);
        wsClientProvider.setSubscribeChannel(&quot;{{{dashboardSettings.subscribeChannel}}}&quot;);
    }];

    var httpsConfig = [&quot;httpClientProvider&quot;,function (httpClientProvider) {
   	  httpClientProvider.setBaseUrl(&quot;https://&quot; + window.location.host);
      httpClientProvider.setToken($.urlParam(&quot;auth_token&quot;));
    }]

     var myApp= angular.module(&quot;myApp&quot;, [&quot;underscore&quot; , &quot;WsClient&quot;, &quot;HttpClient&quot;, &quot;Chart&quot;, 'gridster', 'ui.bootstrap', 'ngRoute', 'Gauge', 'Speedometer', 'Odometer', 'Map', 'Grid', 'toggle-switch', 'Slider', 'Button', 'IFrame', 'Accelerometer', 'Thermometer', 'Display', &quot;ngAnimate&quot;, &quot;ngSanitize&quot;, 'Dygraphs', 'DataService', 'Plotly', 'MetricBox', 'Alert'])
     angular.module('myApp').config(wssConfig);
     angular.module('myApp').config(httpsConfig);
     
     myApp.config(function($interpolateProvider, $locationProvider) {
        $interpolateProvider.startSymbol('{[{');
        $interpolateProvider.endSymbol('}]}');
        $locationProvider.html5Mode({
          enabled: true,
          requireBase: false
        });
     });
  
  
     myApp.controller('RootCtrl', function($scope, $interpolate, $location) {
       var vm = this;
       vm.gridsterOptions = {
          pushing: false,
          minRows: 1, // the minimum height of the grid, in rows
          maxRows: 100,
          columns: 5, // the width of the grid, in columns
          colWidth: 'auto', // can be an integer or 'auto'.  'auto' uses the pixel width of the element divided by 'columns'
          rowHeight: '83', // can be an integer or 'match'.  Match uses the colWidth, giving you square widgets.
          margins: [10, 10], // the pixel distance between each widget
          defaultSizeX: 2, // the default width of a gridster item, if not specifed
          defaultSizeY: 1, // the default height of a gridster item, if not specified
          mobileBreakPoint: 480, // if the screen is not wider that this, remove the grid layout and stack the items
          minColumns: 1,
          resizable: {
            enabled: false
          },
          draggable: {
             enabled: false
          }
       };
       
        vm.init = function() {
          {{#each urlParams}}
           	console.log(&quot;{{this}}&quot;, $location.search()[&quot;{{this}}&quot;])
            vm.{{this}} = $location.search()[&quot;{{this}}&quot;]
          {{/each}}
        }
        {{#each items}}
           	{{#if this.formatFunction}}   
                vm.{{this.formatFunction}} = function(data){
                  {{{this.formatFunctionValue}}}
                }
           	{{/if}} 
        {{/each}}
        
        {{#each items}}
           	{{#if this.functions}}   
            	{{#each this.functions}}
                    vm.{{this.name}} = function(arguments){
                      {{{this.value}}}
                    }
                 {{/each}}
           	{{/if}} 
        {{/each}}
     });
        	
})();
  
&lt;/script&gt;

   &lt;body class=&quot;dashboard-template dashboardTheme &quot;&gt;
      &lt;div ng-controller=&quot;RootCtrl as vm&quot; ng-init=&quot;vm.init();&quot; class=&quot;dashboardContainer&quot;&gt; 
		&lt;div gridster=&quot;vm.gridsterOptions&quot;&gt;
          &lt;ul&gt;
             {{#each items}}
                &lt;li class=&quot;myItem&quot; gridster-item='{sizeX: {{sizeX}}, sizeY: {{sizeY}}, col: {{col}} , row: {{row}} }'&gt;
                    
						&lt;div class=&quot;box {{#if_eq  this.options.box-header "false"}} box-without-header {{/if_eq}}&quot;&gt;
						  &lt;div class=&quot;box-header&quot;&gt;
						    &lt;div class=&quot;box-label&quot;&gt;&lt;span tooltip-append-to-body=&quot;true&quot; uib-tooltip=&quot;{{this.options.boxLabel}}&quot;&gt;{{this.options.boxLabel}}&lt;/span&gt;&lt;/div&gt;
						  &lt;/div&gt;
                          &lt;div class=&quot;clearfix&quot;&gt;&lt;/div&gt;
						  &lt;div class=&quot;box-content&quot;&gt;
						  		&lt;{{type}}
                                    {{#buildAttr this.options }}
                                        {{this}}
                                    {{/buildAttr}}
                                    {{#if this.formatFunction}}   
                                  		on-format-data='vm.{{this.formatFunction}}'
                                    {{/if}} 
                           		&gt;
                                
                                {{#if this.functions}}   
                                       {{#each this.functions}}
                                  			{{this.attribute}}='vm.{{this.name}}'
                                        {{/each}}
                                    {{/if}} 
                                   
 
 
          
 					{{#if this.options.default-info-window}}
                                &lt;info-window id=&quot;{{this.options.default-info-window.id}}&quot; template=&quot;{{this.options.default-info-window.template}}&quot; max-width=&quot;{{this.options.default-info-window.max-width}}&quot; max-height=&quot;{{this.options.default-info-window.max-height}}&quot;&gt;
                                 &lt;/info-window&gt;
                    {{/if}}
                    
       			{{#if this.options.source-info-window}}
                    	{{#each this.options.source-info-window}}
                        		 &lt;info-window id=&quot;infoWindowTemplate_{{this.source}}&quot; template=&quot;{{this.template}}&quot; max-width=&quot;{{this.max-width}}&quot; max-height=&quot;{{this.max-height}}&quot;&gt;
                                 &lt;/info-window&gt;
                        {{/each}}
                    {{/if}}
                                &lt;/{{type}}&gt;
						  &lt;/div&gt;
						&lt;/div&gt;
                &lt;/li&gt;
             {{/each}}
          &lt;/ul&gt;
        &lt;/div&gt;
      &lt;/div&gt;
  &lt;/body&gt;  
&lt;/html&gt;
</script>
  